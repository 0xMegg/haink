(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[333],{1333:function(e,r,s){Promise.resolve().then(s.bind(s,4714)),Promise.resolve().then(s.t.bind(s,6340,23))},4714:function(e,r,s){"use strict";s.d(r,{ProductForm:function(){return E}});var t=s(7573),l=s(7653),o=s(1695),a=s(3351),i=s(8113),n=s(7787),d=s(8204);let c=["LEGACY_IMWEB","MASTER"],u=["IMWEB","MASTER"],p=d.Km(c),g=d.Km(u),f=d.Ry({productId:d.Z_().min(1,"IMWEB 상품번호를 입력하세요."),name:d.Z_().min(1,"상품명을 입력하세요."),categoryIdsRaw:d.Z_().min(1,"카테고리 ID를 입력하세요."),priceSale:d.oQ.number().int().nonnegative("가격은 0 이상이어야 합니다."),inventoryTrack:d.O7(),stockQty:d.oQ.number().int().nonnegative().nullable().optional(),descriptionHtml:d.Z_().optional(),saleStatus:d.Z_().optional(),displayStatus:d.O7(),optionName:d.Z_().optional().nullable(),optionValues:d.Z_().optional(),issuedCategoryId:d.Z_().optional(),currentCategoryId:d.Z_().optional(),sotMode:p.optional(),externalUrl:d.Z_().url("올바른 URL 형식이 아닙니다.").or(d.i0("")).optional(),sourceOfTruth:g.optional(),rawSnapshot:d.Z_().optional()});var m=s(607),x=s(5579);function h(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,x.m6)((0,m.W)(r))}var b=s(8828);let v=(0,s(9289).j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),y=l.forwardRef((e,r)=>{let{className:s,variant:l,size:o,asChild:a=!1,...i}=e,n=a?b.g7:"button";return(0,t.jsx)(n,{className:h(v({variant:l,size:o,className:s})),ref:r,...i})});y.displayName="Button";let j=l.forwardRef((e,r)=>{let{className:s,type:l="text",...o}=e;return(0,t.jsx)("input",{type:l,className:h("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...o})});j.displayName="Input";let N=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,t.jsx)("textarea",{className:h("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...l})});N.displayName="Textarea";var w=s(6809);let I=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,t.jsx)(w.fC,{className:h("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...l,ref:r,children:(0,t.jsx)(w.bU,{className:"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"})})});I.displayName=w.fC.displayName;let S=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,t.jsx)("label",{ref:r,className:h("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...l})});S.displayName="Label";let k={productId:"",name:"",categoryIdsRaw:"",priceSale:0,inventoryTrack:!1,stockQty:null,descriptionHtml:"",saleStatus:"",displayStatus:!0,optionName:"",optionValues:"",issuedCategoryId:"",currentCategoryId:"",sotMode:"LEGACY_IMWEB",externalUrl:"",sourceOfTruth:"IMWEB",rawSnapshot:""},C="flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50";function E(e){var r,s,d,p,g,m,x,h,b,v,w,S,E,M,A,O,V;let{mode:Z,productId:U,defaultValues:B}=e,W=(0,o.useRouter)(),L=(0,a.cI)({resolver:(0,i.F)(f),defaultValues:{...k,...B,productId:null!==(v=null==B?void 0:B.productId)&&void 0!==v?v:"",optionValues:null!==(w=null==B?void 0:B.optionValues)&&void 0!==w?w:"",currentCategoryId:null!==(S=null==B?void 0:B.currentCategoryId)&&void 0!==S?S:"",issuedCategoryId:null!==(E=null==B?void 0:B.issuedCategoryId)&&void 0!==E?E:"",sotMode:null!==(M=null==B?void 0:B.sotMode)&&void 0!==M?M:"LEGACY_IMWEB",sourceOfTruth:null!==(A=null==B?void 0:B.sourceOfTruth)&&void 0!==A?A:"IMWEB",externalUrl:null!==(O=null==B?void 0:B.externalUrl)&&void 0!==O?O:"",rawSnapshot:null!==(V=null==B?void 0:B.rawSnapshot)&&void 0!==V?V:""}}),[D,Q]=l.useState(!1),q=L.watch("inventoryTrack");l.useEffect(()=>{q||L.setValue("stockQty",null,{shouldDirty:!0})},[q,L]);let P=L.handleSubmit(async e=>{try{Q(!0);let s=await fetch("create"===Z?"/api/products":"/api/products/".concat(U),{method:"create"===Z?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json();if(!s.ok){var r;throw Error(null!==(r=t.error)&&void 0!==r?r:"요청이 실패했습니다.")}n.A.success("create"===Z?"상품이 등록되었습니다.":"상품이 수정되었습니다."),W.refresh(),"create"===Z&&L.reset(k)}catch(r){let e=r instanceof Error?r.message:"알 수 없는 오류";n.A.error(e)}finally{Q(!1)}});return(0,t.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,t.jsxs)("section",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)(_,{label:"IMWEB 상품번호",required:!0,children:[(0,t.jsx)(j,{placeholder:"예: 5757",disabled:"edit"===Z,...L.register("productId")}),(0,t.jsx)(R,{message:null===(r=L.formState.errors.productId)||void 0===r?void 0:r.message})]}),(0,t.jsxs)(_,{label:"상품명",required:!0,children:[(0,t.jsx)(j,{placeholder:"상품명",...L.register("name")}),(0,t.jsx)(R,{message:null===(s=L.formState.errors.name)||void 0===s?void 0:s.message})]}),(0,t.jsxs)(_,{label:"카테고리 ID (쉼표 구분)",required:!0,children:[(0,t.jsx)(j,{placeholder:"CATE9,CATE44",...L.register("categoryIdsRaw")}),(0,t.jsx)(R,{message:null===(d=L.formState.errors.categoryIdsRaw)||void 0===d?void 0:d.message})]}),(0,t.jsxs)(_,{label:"판매가",required:!0,children:[(0,t.jsx)(j,{type:"number",min:0,step:1,...L.register("priceSale",{valueAsNumber:!0})}),(0,t.jsx)(R,{message:null===(p=L.formState.errors.priceSale)||void 0===p?void 0:p.message})]}),(0,t.jsx)(_,{label:"판매 상태",children:(0,t.jsx)(j,{placeholder:"판매중",...L.register("saleStatus")})}),(0,t.jsxs)(_,{label:"SOT 모드",required:!0,children:[(0,t.jsx)("select",{className:C,...L.register("sotMode"),children:c.map(e=>(0,t.jsx)("option",{value:e,children:e},e))}),(0,t.jsx)(R,{message:null===(g=L.formState.errors.sotMode)||void 0===g?void 0:g.message})]}),(0,t.jsx)(_,{label:"옵션 이름",children:(0,t.jsx)(j,{placeholder:"예: VERSION",...L.register("optionName")})}),(0,t.jsx)(_,{className:"md:col-span-2",label:"옵션 값 (쉼표 구분)",children:(0,t.jsx)(j,{placeholder:"KARINA,GISELLE",...L.register("optionValues")})}),(0,t.jsx)(_,{className:"md:col-span-2",label:"상품 상세",children:(0,t.jsx)(N,{rows:4,...L.register("descriptionHtml")})})]}),(0,t.jsxs)("section",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)(_,{label:"발급 기준 카테고리 ID",children:[(0,t.jsx)(j,{placeholder:"issued_category_id",...L.register("issuedCategoryId")}),(0,t.jsx)(R,{message:null===(m=L.formState.errors.issuedCategoryId)||void 0===m?void 0:m.message})]}),(0,t.jsxs)(_,{label:"현재 카테고리 ID",children:[(0,t.jsx)(j,{placeholder:"current_category_id",...L.register("currentCategoryId")}),(0,t.jsx)(R,{message:null===(x=L.formState.errors.currentCategoryId)||void 0===x?void 0:x.message})]})]}),(0,t.jsxs)("section",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsx)(T,{label:"재고 관리",description:"Y면 수량 입력 필요",children:(0,t.jsx)(I,{checked:L.watch("inventoryTrack"),onCheckedChange:e=>L.setValue("inventoryTrack",e,{shouldDirty:!0})})}),(0,t.jsx)(_,{label:"재고 수량",children:(0,t.jsx)(j,{type:"number",min:0,step:1,disabled:!q,...L.register("stockQty",{valueAsNumber:!0})})}),(0,t.jsx)(T,{label:"노출 상태",children:(0,t.jsx)(I,{checked:L.watch("displayStatus"),onCheckedChange:e=>L.setValue("displayStatus",e,{shouldDirty:!0})})})]}),(0,t.jsxs)("section",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)(_,{label:"외부 상품 URL",children:[(0,t.jsx)(j,{type:"url",placeholder:"https://...",...L.register("externalUrl")}),(0,t.jsx)(R,{message:null===(h=L.formState.errors.externalUrl)||void 0===h?void 0:h.message})]}),(0,t.jsxs)(_,{label:"Source of Truth",children:[(0,t.jsx)("select",{className:C,...L.register("sourceOfTruth"),children:u.map(e=>(0,t.jsx)("option",{value:e,children:e},e))}),(0,t.jsx)(R,{message:null===(b=L.formState.errors.sourceOfTruth)||void 0===b?void 0:b.message})]}),(0,t.jsx)(_,{className:"md:col-span-2",label:"Raw Snapshot JSON",children:(0,t.jsx)(N,{rows:4,placeholder:'{"foo":"bar"}',...L.register("rawSnapshot")})})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(y,{type:"submit",disabled:D,children:"create"===Z?"상품 등록":"상품 수정"}),"edit"===Z&&(0,t.jsx)(y,{type:"button",variant:"outline",onClick:()=>L.reset(L.getValues()),children:"변경 취소"})]})]})}function _(e){let{label:r,children:s,required:l,className:o}=e;return(0,t.jsxs)("div",{className:h("flex flex-col gap-2",o),children:[(0,t.jsxs)(S,{children:[r,l?(0,t.jsx)("span",{className:"ml-1 text-destructive",children:"*"}):null]}),s]})}function T(e){let{label:r,description:s,children:l}=e;return(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:r}),s?(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:s}):null]}),l]})}function R(e){let{message:r}=e;return r?(0,t.jsx)("p",{className:"text-sm text-destructive",children:r}):null}}}]);